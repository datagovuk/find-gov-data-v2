{% extends "layout.html" %}

{% block page_title %}
  GOV.UK prototype kit
{% endblock %}

{% block content %}

<main class="results-page" id="content" role="main">
  <div class="grid-row masthead">
    <div class="search-section">
      <h1 class="heading-large">Search data.gov.uk</h1>
      <form id="search-form" action="/search-results" method="GET" class="column-two-thirds">
        <fieldset>
          <div id="search-box">
            <input id="q" name="q" type="text" placeholder="" class="form-control search" autocomplete="off" value="{{query}}"/><button type="submit" class="search-submit">Find data</button>
          </div>
        </fieldset>
      </form>
    </div>
  </div>
  <div class="grid-row">
    <div class="column-two-thirds">
      <span class="bold-small">356</span> results found for <span class="bold-small">'{{ query }}'</span>
    </div>
  </div>
  <div class="grid-row">
    <div class="column-one-third filters">
      <label class="form-label">
      <h2 class="heading-medium">Sort by</h2>
      </label>
      <form>
        <div class="form-group">
          <fieldset>

            <legend class="visually-hidden">Sort by</legend>

            <div class="multiple-choice">
              <input id="radio-inline-1" type="radio" name="radio-inline-group" value="Best match">
              <label for="radio-inline-1">Best match</label>
            </div>
            <div class="multiple-choice">
              <input id="radio-inline-2" type="radio" name="radio-inline-group" value="Most viewed">
              <label for="radio-inline-2">Most viewed</label>
            </div>
            <div class="multiple-choice">
              <input id="radio-inline-2" type="radio" name="radio-inline-group" value="Most recent" checked='checked'>
              <label for="radio-inline-2">Most recent</label>
            </div>
          </fieldset>
        </div>
      </form>
      <h2 class="heading-medium">Filter search results</h2>

      <label class="form-label">
        Select publisher
      </label>
      <form>
        <fieldset>
          <legend class="visually-hidden">Format</legend>
          <div class="multiple-choice">
            <input id="" name="org-types" type="checkbox" value="">
            <label for="">Central Government</label>
          </div>
          <div class="multiple-choice">
            <input id="" name="org-types" type="checkbox" value="">
            <label for="">Local Authorities</label>
          </div>
          <div class="multiple-choice">
            <input id="" name="org-type" type="checkbox" value="">
            <label for="">Other Government bodies</label>
          </div>
        </fieldset>
      </form>

      <br/>
      <label class="form-label">
        Enter geographical area
      </label>

      <input class="form-control" id="filter-area" type="text">

      <input class="button" type="submit" value="Filter">
      <input class="button secondary" type="submit" value="Reset all filters">
    </div>

    <div class="column-two-thirds filters">
      {% set regExp = r/.*register.*/gi %}

      {% for dataset in results %}
      <!-- When source data is fixed, reset to if dataset.dataset_type == 'register' -->
      <div class="result result{% if regExp.test(dataset.title) %} register{% endif %} ">
        <h2 class="heading-medium">
          <a href="/datasets/{{ dataset.name }}">{{ dataset.title | truncate(65) }}</a>
        </h2>
        <dl class="metadata">
              <dt>Published by:</dt>
              <dd><a href="#">{{ dataset.organisation.title }}</a></dd>
              <dt>Last updated:</dt>
              <dd>{{ dataset.last_updated }}</dd>
              {% if dataset.location %}
                <dt>Geographical area:</dt>
                <dd>{{ dataset.location }}</dd>
              {% endif %}
            </dl>
        <p>{{ dataset.summary | truncate(140)  }}</p>
      </div>
      {% endfor %}

      <ul class="pagination">
        <br />
        <li>1</li>
        <li><a href="#">2</a></li>
        <li><a href="#">3</a></li>
        <li><a href="#">4</a></li>
        <li><a href="#">5</a></li>
      </ul>

      <div class="related-searches">
        <h2 class="heading-medium">Searches related to "broadband"</h2>
        <ul>
          <li><a href="">internet speed</a></li>
          <li><a href="">uk home broadband</a></li>
          <li><a href="">internet at home</a></li>
          <li><a href="">fibre optic internet</a></li>
        </ul>
      </div>
    </div>

  </div>

</main>

{% endblock %}
